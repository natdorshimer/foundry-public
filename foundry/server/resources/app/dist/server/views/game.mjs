import View from"./view.mjs";export default class GameView extends View{route="/game";_template="game";_methods=["get"];async handleGet(e,r){const{db:t,game:o,logger:s}=global;if(!o.world)return this._noWorld(e,r);if(!e.user)return r.redirect(`${e.baseUrl}/join`);if(!await t.User.get(e.user))return s.error(Error(`User ${e.user} not found!`)),r.redirect(`${e.baseUrl}/join`);const i=await t.Setting.getValue("core.moduleConfiguration")||{},a=View._getStaticContent({world:!0,moduleConfig:i});r.render(this._template,{scripts:a.scripts,styles:a.styles,watermark:null})}}