import BaseCombat from"../../../common/documents/combat.mjs";import ServerDocumentMixin from"../backend/server-document.mjs";export default class Combat extends(ServerDocumentMixin(BaseCombat)){static get collection(){return"combat"}_onUpdate(e,t,a){if(super._onUpdate(e,t,a),Number.isNumeric(t.advanceTime)&&!t.worldTime&&(t.worldTime={delta:t.advanceTime}),"object"==typeof t.worldTime){const{delta:e,...m}=t.worldTime;Number.isNumeric(e)&&db.Setting.advanceTime(e,m,a)}}static async _onDeleteScene(e){const t=(await this.find({scene:e.id})).map((e=>e.id));await this.sublevel.delMany(t),db.DatabaseBackend.emit(this.documentName,"delete",t)}}